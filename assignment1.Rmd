---
title: "Reproducible Research: Peer Assessment 1"
output: 
html_document:
keep_md: true
---

# Project scope

This project is designed as an assignment for Coursera's Reproducible research course. It's aim is to demonstrate the use of R markdown by creating this single R markdown document that can be processed by knitr and be transformed into an HTML file.

In this document, we provide of answers to a series of questions based on  data from a personal activity monitoring device. This device collects data at 5 minute intervals through out the day. The data consists of two months of data from an anonymous individual collected during the months of October and November, 2012 and include the number of steps taken in 5 minute intervals each day.

The following section describes the various steps required in the assignment to answer the questions about the date. The R code and results are provided.

# Personal activity monitoring Q&A

## Step 1:  Loading and preprocessing the data

1. Download and extract the activity.csv file only if it does not exist yet

```{r}
if(!file.exists("activity.zip")){
    download.file("https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2Factivity.zip",destfile="activity.zip",method="curl")
}
unzip("activity.zip",exdir=".")

```

2. Load the dataset in the activity variable

```{r}
activity <- read.csv("activity.csv")
```


3. Data cleaning: 
convert the date to Date class
```{r}
activity$date <- as.Date(activity$date,format="%Y-%m-%d")
```

## Step 2: What is mean total number of steps taken per day?
1. Histogram of total number of steps taken each day

First we need to calculate the total number of steps for each day. `na.rm=TRUE` replaces missing values with 0 in the summarise step. This is done to avoid "missing values" messages when drawing the plot

```{r, message=FALSE}
library(dplyr)
bydate <- activity %>% 
    group_by(date) %>%
    summarise(total=sum(steps,na.rm=TRUE))
```
 
The following histogram answers the question about the total number of steps taken each day

```{r}
library(ggplot2)
ggplot(bydate,aes(x=date,y=total))+
  geom_bar(stat="identity")
```

2. Calculate and report the mean and median total number of steps taken per day

We calculate the mean and median with two ways of "ignoring" the NA values of the data set: 

* `meanSteps` and `medianSteps` deal with the case when days without any steps are given 0 values
* `meanWithoutZeroDays` and `medianWithoutZeroDays` calculate the averages when those days are removed

```{r averages}
meanSteps <- mean(bydate$total)
meanWithoutZeroDays <- mean(bydate$total[bydate$total!=0])
medianSteps <- median(bydate$total)
medianWithoutZeroDays <- median(bydate$total[bydate$total!=0])
```

The median is `r format(medianSteps,nsmall=2)` if we consider 0-values days, which is close to the median when we remove those days, which is `r format(medianWithoutZeroDays,nsmall=2)`

Interestingly, if we remove the days with 0 steps due to missing values, we get a mean close to the median: `r format(meanWithoutZeroDays,nsmall=2)` instead of `r format(meanSteps, nsmall=2)` when those days bring the total down.



## Step 3: What is the average daily activity pattern?



## Imputing missing values



## Are there differences in activity patterns between weekdays and weekends?

